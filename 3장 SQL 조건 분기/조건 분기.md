# 3장 SQL 조건 분기

- UNION : 두 테이블의 중복되는 값을 한번만 반환
- UNION ALL : 두 테이블의 중복되는 값까지 모두 반환한다.

### UNION을 사용했을 떄의 실행 계획 문제

테이블에 접근하여 풀스캔함. 성능문제

테이블의 크기에 따라 비용이 선형으로 증가함

### WHERE 구에서 조건 분기를 하는 사람은 초보자

- UNION을 사용한 분기는 SELECT 구문을 기본 단위로 분기
- CASE식을 사용한 분기는 문자 그대로 `식` 을 바탕으로 하는 사고
- `구문에서 식`으로 사고를 변경하는 것이 SQL을 마스터하는 열쇠중 하나

## 그래도 UNION이 필요한 경우

1. UNION을 사용할 수 밖에 없는경우
    - 여러 개의 테이블에서 검색한 결과를 머지하는 경우
    - 실행 계획 등을 확인해서 어떤 것이 더 좋은지 명확하게 확인
2. UNION을 사용하는 것이 성능적으로 더 좋은 경우
    - UNION을 사용했을 때 좋은 인덱스(압축을 잘하는 인덱스)를 사용하지만, 이외의 경우에는 풀스캔이 발생한다면, UNION을 사용한 방법이 성능적으로 더 좋을 수 있음 (자세한 것은 10장)